<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Infinity Warrior</title>
    <style>
      :root {
        color-scheme: dark;
        font-family: Inter, system-ui, sans-serif;
        background: #0e1117;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        background: #0e1117;
        color: #e5e7eb;
        min-height: 100vh;
      }
      .game-shell {
        width: min(1200px, 100vw);
        margin: 0 auto;
        padding: 10px;
        display: grid;
        grid-template-columns: 1fr 320px;
        gap: 10px;
      }
      .battle-wrap { position: relative; }
      #game {
        width: 100%;
        height: min(64vh, 560px);
        border: 1px solid #253042;
        background: #121826;
        border-radius: 8px;
      }
      .tab-nav {
        margin-top: 8px;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 6px;
      }
      .tab-nav button {
        border: 1px solid #2d3a4e;
        border-radius: 8px;
        background: #141c2a;
        color: #cbd5e1;
        padding: 8px;
        font-size: 13px;
        font-weight: 700;
        cursor: pointer;
      }
      .tab-nav button.active { background: #23314a; border-color: #4f73a6; }
      .tab-nav button:disabled { opacity: 0.45; cursor: not-allowed; }
      .side-panel {
        border: 1px solid #253042;
        border-radius: 8px;
        background: #111827;
        padding: 12px;
        display: grid;
        grid-template-rows: auto auto 1fr;
        gap: 10px;
        min-height: min(760px, 92vh);
      }
      .panel-title { font-weight: 700; font-size: 18px; margin-bottom: 6px; }
      .activity-switch {
        margin-top: 8px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 6px;
      }
      .activity-switch button {
        border: 1px solid #2d3a4e;
        border-radius: 8px;
        background: #141c2a;
        color: #cbd5e1;
        padding: 6px 8px;
        font-size: 12px;
        font-weight: 700;
        cursor: pointer;
      }
      .activity-switch button.active { background: #1d3f2f; border-color: #4ea67a; }
      .activity-switch button:disabled { opacity: 0.45; cursor: not-allowed; }
      .stat-line { color: #9fb0c8; margin: 3px 0; font-size: 13px; }
      .tab-content h3 { margin: 0 0 8px; font-size: 16px; }
      .offline-summary {
        border: 1px solid #2b3850;
        border-radius: 8px;
        background: #121d30;
        color: #9fb4d4;
        font-size: 12px;
        padding: 8px;
        display: grid;
        gap: 4px;
      }
      .stat-grid {
        display: grid;
        gap: 8px;
      }
      .stat-grid > div {
        background: #0f172a;
        border: 1px solid #223049;
        border-radius: 8px;
        padding: 8px;
        display: grid;
        gap: 3px;
      }
      .stat-grid span,
      .progress-meta { color: #93a3b8; font-size: 12px; }
      .stat-grid strong,
      .stats-list strong { color: #e5e7eb; }
      .battle-enemy {
        margin: 0 0 8px;
        font-size: 12px;
        color: #a9bbd5;
      }
      .battle-log {
        margin: 0;
        padding-left: 18px;
        max-height: 320px;
        overflow: auto;
        display: grid;
        gap: 4px;
        color: #cdd9eb;
        font-size: 12px;
      }
      .cultivation-card {
        border: 1px solid #223049;
        background: #0f172a;
        border-radius: 8px;
        padding: 8px;
        margin-bottom: 8px;
      }
      .stat-header { font-size: 13px; font-weight: 700; margin-bottom: 6px; }
      .double-progress {
        position: relative;
        height: 12px;
        border-radius: 999px;
        background: #1f2c42;
        overflow: hidden;
      }
      .double-progress .base,
      .double-progress .overlay {
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
      }
      .double-progress .base { background: #60a5fa; }
      .double-progress .overlay { background: rgba(192, 132, 252, 0.6); }
      .cultivate-slider { width: 100%; margin-top: 6px; }
      .stats-list { display: grid; gap: 6px; font-size: 12px; color: #aebfd6; }

      @media (max-width: 900px) {
        .game-shell { grid-template-columns: 1fr; padding: 8px; }
        #game { height: min(52vh, 420px); }
        .side-panel { min-height: unset; }
        .tab-nav { grid-template-columns: repeat(4, minmax(0, 1fr)); }
      }
    </style>
  </head>
  <body>
    <div class="game-shell">
      <section class="battle-wrap">
        <canvas id="game" width="920" height="560"></canvas>
        <nav class="tab-nav">
          <button data-tab="character" class="active">Character</button>
          <button data-tab="battle">Battle</button>
          <button data-tab="cultivation" id="cultivation-tab" disabled>Cultivation</button>
          <button data-tab="stats">Stats</button>
        </nav>
      </section>

      <aside class="side-panel">
        <div>
          <div class="panel-title">Infinity Warrior</div>
          <div id="core-stats"></div>
          <div class="activity-switch" id="activity-switch">
            <button data-mode="battle" class="active">Battle Mode</button>
            <button data-mode="cultivation" id="cultivation-mode" disabled>Cultivation Mode</button>
          </div>
        </div>
        <div id="offline-summary" class="offline-summary"><span>No offline gains yet.</span></div>
        <div id="tab-content" class="tab-content"></div>
      </aside>
    </div>
    <script type="module" src="./src/main.js"></script>
  </body>
</html>
